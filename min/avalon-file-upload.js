document.currentScript.loadSameNameHTML(function(t){window.customElements.define("avalon-file-upload",class extends window.HTMLElement{static get observedAttributes(){return["data-id"]}constructor(){super()}connectedCallback(){this.innerHTML=t;let e=this;e.querySelector("input").addEventListener("change",async function(){if(this.files[0]&&e.hasAttribute("data-url")){let t=await window.tingting.api.put(e.getAttribute("data-url"),this.files[0]);t&&e.setAttribute("data-id",t.id)}}),e.addEventListener("click",function(){e.querySelector("input").click()})}async attributeChangedCallback(t,e,i){let a=this;if(a.hasAttribute("data-url")&&i){let t=await window.tingting.api.get(a.getAttribute("data-url"),{id:i});t&&t.url&&"image"===t.contentCategory&&(a.style.backgroundImage=`url(${t.url})`)}}})});